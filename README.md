# ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ humanscape-assignment

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ê¸°ì—…ê³¼ì œ
- íœ´ë¨¼ìŠ¤ì¼€ì´í”„
- ê¸°ì—…ì‚¬ì´íŠ¸: https://humanscape.io/kr/index.html
- ê¸°ì—…ì±„ìš©ê³µê³ : https://www.wanted.co.kr/wd/41413

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ê³¼ì œ ë‚´ìš©

### **[í•„ìˆ˜ í¬í•¨ ì‚¬í•­]**

- READ.ME ì‘ì„±
    - í”„ë¡œì íŠ¸ ë¹Œë“œ, ìì„¸í•œ ì‹¤í–‰ ë°©ë²• ëª…ì‹œ
    - êµ¬í˜„ ë°©ë²•ê³¼ ì´ìœ ì— ëŒ€í•œ ê°„ëµí•œ ì„¤ëª…
    - ì™„ë£Œëœ ì‹œìŠ¤í…œì´ ë°°í¬ëœ ì„œë²„ì˜ ì£¼ì†Œ
    - í•´ë‹¹ ê³¼ì œë¥¼ ì§„í–‰í•˜ë©´ì„œ íšŒê³  ë‚´ìš© ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…
- Swaggerë‚˜ Postmanì„ ì´ìš©í•˜ì—¬ API í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„

### [í™•ì¸ ì‚¬í•­]

- **ORM ì‚¬ìš© í•„ìˆ˜**
- **ë°ì´í„°ë² ì´ìŠ¤ëŠ” SQLiteë¡œ êµ¬í˜„**
- **secret key, api key ë“±ì„ ë ˆí¬ì§€í† ë¦¬ì— ì˜¬ë¦¬ì§€ ì•Šë„ë¡ ìœ ì˜**
    - README.md ì— ê´€ë ¨ ì„¤ëª… ëª…ì‹œ í•„ìš”

### [ë„ì „ ê³¼ì œ: ìŠ¤ìŠ¤ë¡œì—ê²Œë„ ë„ì›€ì´ ë˜ëŠ” ë‚´ìš© + ì¶”ê°€ ê°€ì‚°ì ]

- ë°°í¬í•˜ì—¬ ì›¹ì—ì„œ ì‚¬ìš© í•  ìˆ˜ ìˆë„ë¡ ì œê³µ
- ì„ìƒì •ë³´ ê²€ìƒ‰ API ì œê³µ

### [ê³¼ì œ ì•ˆë‚´]

ë‹¤ìŒ ì‚¬í•­ë“¤ì„ ì¶©ì¡±í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•´ì£¼ì„¸ìš”.

- ì„ìƒì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ëŠ” batch task
    - ì°¸ê³ : [https://www.data.go.kr/data/3074271/fileData.do#/API ëª©ë¡/GETuddi%3Acfc19dda-6f75-4c57-86a8-bb9c8b103887](https://www.data.go.kr/data/3074271/fileData.do#/API%20%EB%AA%A9%EB%A1%9D/GETuddi%3Acfc19dda-6f75-4c57-86a8-bb9c8b103887)
- ìˆ˜ì§‘í•œ ì„ìƒì •ë³´ì— ëŒ€í•œ API
    - íŠ¹ì • ì„ìƒì •ë³´ ì½ê¸°(í‚¤ ê°’ì€ ììœ )
- ìˆ˜ì§‘í•œ ì„ìƒì •ë³´ ë¦¬ìŠ¤íŠ¸ API
    - ìµœê·¼ ì¼ì£¼ì¼ë‚´ì— ì—…ë°ì´íŠ¸(ë³€ê²½ì‚¬í•­ì´ ìˆëŠ”) ëœ ì„ìƒì •ë³´ ë¦¬ìŠ¤íŠ¸
        - pagination ê¸°ëŠ¥
- **Test êµ¬í˜„ì‹œ ê°€ì‚°ì ì´ ìˆìŠµë‹ˆë‹¤.**

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ íŒ€: ë¦¬ìŠ¤í…Œë¦°(Listerine)

* íŒ€ì›

| ì´ë¦„ | ì—­í•  | GITHUB | BLOG |
| :---: | :---: | :---: | :---: |
| `ê¹€ì£¼ì™„` |  | [joowankim](https://github.com/joowankim) | https://make-easy-anything.tistory.com |
| `ë°•ì€í˜œ` |  | [eunhye43](https://github.com/eunhye43) | https://velog.io/@majaeh43 |
| `ìœ¤ìˆ˜ì§„` |  | [study-by-myself](https://github.com/study-by-myself)| https://pro-yomi.tistory.com |
| `ì£¼ì¢…ë¯¼` |  | [Gouache-studio](https://github.com/Gouache-studio) | https://gouache-studio.tistory.com/ |

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ êµ¬í˜„ ë‚´ìš©

### ì´ ì¤‘ì—ì„œ ê³¼ì œì—ì„œ êµ¬í˜„í•˜ë„ë¡ ì–¸ê¸‰ëœ ì—”ë“œí¬ì¸íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- `GET /list`: ì „ì²´ ì„ìƒ ì—°êµ¬ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
- `GET /trials/{trial_id}`: path parameterë¡œ `trial_id`ë¥¼ ë°›ì•„ íŠ¹ì • ì„ìƒ ì—°êµ¬ ì¡°íšŒ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Unit test

í…ŒìŠ¤íŠ¸ëŠ” `/tests` ë””ë ‰í† ë¦¬ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ 
$ pytest
```

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ëª¨ë¸ ê´€ê³„

![image](https://user-images.githubusercontent.com/32446834/142003506-26349b83-d65a-4912-a5a9-b887d7aed36a.png)

### ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ batch task

ì„ìƒ ì—°êµ¬ ì˜¤í”ˆ APIë¥¼ ì´ìš©í•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì €ì¥í•˜ê±°ë‚˜ í˜„ì¬ ê°€ì§€ê³  ìˆëŠ” ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°°ì¹˜ íƒœìŠ¤í¬ë¥¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
ì €í¬ê°€ êµ¬í˜„í•œ ë°°ì¹˜ íƒœìŠ¤í¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°–ìŠµë‹ˆë‹¤.

- ë°°ì¹˜ íƒœìŠ¤í¬ì˜ ë™ì‘ì„ í™•ì¸í•˜ê¸° ìœ„í•´ ë§¤ ë¶„ë§ˆë‹¤ ë°ì´í„° ë™ê¸°í™” íƒœìŠ¤í¬ê°€ ë™ì‘í•©ë‹ˆë‹¤.
- êµ¬í˜„ëœ ì½ê¸° ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œ ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¡œì¨ ë™ì‘í•©ë‹ˆë‹¤.
- ë°°ì¹˜ íƒœìŠ¤í¬ëŠ” ì½ê¸° ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸”ì„ ê³µìœ í•©ë‹ˆë‹¤.
- ë°°ì¹˜ íƒœìŠ¤í¬ì˜ í• ë‹¹ì€ `run_cron.py`ì—ì„œ ìˆ˜í–‰ë˜ë©° ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³³ì€ `tasks.py`ì…ë‹ˆë‹¤.
- ë°°ì¹˜ íƒœìŠ¤í¬ì˜ jobstoreì™€ brokerì˜ ì—­í• ì€ ëª¨ë‘ `Redis` ì„œë¹„ìŠ¤ê°€ ë‹´ë‹¹í•©ë‹ˆë‹¤.

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¡°

ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ê¸°ë³¸ì ìœ¼ë¡œ ê³„ì¸µí™”ëœ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ ê³„ì¸µì€ `presentation(routers.py)`, `application(application)`, `domain(domain)`, `persistence(infra)`ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.
ê° ê³„ì¸µì€ ë‹¤ìŒê³¼ ê°™ì€ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

- `presentation`: ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” application ê³„ì¸µì˜ serviceë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
- `application`: domain ëª¨ë¸ì„ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì—­í• ì„ í•˜ë©° persistence ê³„ì¸µìœ¼ë¡œì˜ ì ‘ê·¼ì„ ì œì–´í•˜ë©°, íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
- `domain`: ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•´ê²°í•˜ëŠ” ë¬¸ì œ ì˜ì—­ì˜ ì¤‘ì‹¬ì´ ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìœ„ì¹˜í•©ë‹ˆë‹¤.
- `persistence`: ë°ì´í„°ë¥¼ ì‹¤ì œë¡œ ë³´ê´€í•˜ê³  ìˆëŠ” ê³³ìœ¼ë¡œì˜ ì ‘ê·¼ì„ ì œì–´í•©ë‹ˆë‹¤.

### ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ì£¼ìš” ì„¤ê³„ í¬ì¸íŠ¸

#### ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ì´ìš©í•œ ë°ì´í„° ì €ì¥ì†Œë¡œì˜ ì ‘ê·¼

- ë°ì´í„°ë¡œì˜ ì ‘ê·¼ì„ ì œì–´í•˜ê¸° ìœ„í•´ì„œ `DataSource`ì™€ `Repository` ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
-  ê°ê°ì€ í•„ìš”í•œ ë©”ì†Œë“œê°€ ì¶”ìƒí™”ëœ `AbstractTrialDataSource`ì™€ `AbstractTrialRepository`ë¥¼ êµ¬í˜„í•´ ì˜¤í”ˆ APIì™€ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

#### ì‘ì—…ë‹¨ìœ„(Unit of Work)ë¥¼ ì´ìš©í•œ íŠ¸ëœì­ì…˜ ê´€ë¦¬

- ì‘ì—…ë‹¨ìœ„ ì»´í¬ë„ŒíŠ¸ì˜ `__enter__`ì™€ `__exit__` ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•´ì„œ ì´ë¥¼ ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €ë¡œì¨ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- `__enter__` ë©”ì†Œë“œì—ì„œ ì„¸ì…˜ê³¼ `Repository`ë‚˜ `DataSource` ê°ì²´ë¥¼ ìƒì„±í•´ ì‘ì—…ë‹¨ìœ„ì˜ ì»¨í…ìŠ¤íŠ¸ ë‚´ì—ì„œë§Œ ë°ì´í„° ì €ì¥ì†Œì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
- `__exit__` ë©”ì†Œë“œì—ì„œ `rollback`ì„ í˜¸ì¶œí•˜ê³  ì„¸ì…˜ì„ ë‹«ì•„ì„œ ì»¤ë°‹ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì„ ë¡¤ë°±ì‹œí‚µë‹ˆë‹¤.

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ì‹¤í–‰í™˜ê²½ ì„¤ì ˆ ë°©ë²•

> `git`ê³¼ `docker`, `docker-compose`ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

1. ë ˆí¬ì§€í† ë¦¬ git í´ë¡ 

    ```bash
    $ git clone https://github.com/Pre-Onboarding-Listerine/humanscape-assignment.git
    ```
   
2. `<í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬>/src/configs`, í•´ë‹¹ ê²½ë¡œì— `secret.py`ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

    ```python
    # secret.py
    DATA_SOURCE_END_POINT = "https://api.odcloud.kr/api/3074271/v1/uddi:cfc19dda-6f75-4c57-86a8-bb9c8b103887"
    DATA_SOURCE_AUTHORIZATION = "<ë°œê¸‰ë°›ì€ Encoding ì¸ì¦í‚¤>"
    DATA_SOURCE_SERVICE_KEY = "<ë°œê¸‰ë°›ì€ Decoding ì¸ì¦í‚¤>"
    ```

3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰í•˜ê¸°

    ```bash
    $ docker-compose up

    # ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤ë©´
    $ docker-compose up -d
    ```

4. ë¡œì»¬ì—ì„œ ì‹¤í–‰ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼í•˜ê¸°

    ```commandline
    # í˜¸ìŠ¤íŠ¸ URLs
    http://localhost:8000
    ```

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ê³¼ì œ ê²°ê³¼ë¬¼ í…ŒìŠ¤íŠ¸ ë° í™•ì¸ ë°©ë²•

1. POSTMAN í™•ì¸
    ```commandline
    https://documenter.getpostman.com/view/15905881/UVCB9PDd
    ```

2. ë°°í¬ëœ ì„œë²„ì˜ ì£¼ì†Œ

    ```commandline
    13.124.179.161:8000
    ```

# ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ Reference

ì´ í”„ë¡œì íŠ¸ëŠ” ì›í‹°ë“œxìœ„ì½”ë“œ ë°±ì—”ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ ì¼í™˜ìœ¼ë¡œ íœ´ë¨¼ìŠ¤ì¼€ì´í”„ì—ì„œ ì¶œì œí•œ ê³¼ì œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

